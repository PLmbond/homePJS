<!doctype html>
<html>

<head>
  <meta charset="utf-8" />
  <meta http-equiv="x-ua-compatible" content="ie=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Profound.js License Key Management</title>
</head>

<body onload="<%= (typeof message != "undefined") ? `alert("${message}")` : "" %>">
  <h1>License Key Management</h1>
  <div><label>Machine id:</label><span><%= (typeof machineid != "undefined") ? machineid : "" %></span></div>
  <div><button onclick="location.href='/key/trial'">Request Trial Key</button></div>
  <div>
    <form method="post" action="/key">
      <input type="hidden" name="apply" value="1" />
      <div><label for="keyData" />Paste License Key</label></div>
      <div><textarea id="keyData" name="keyData" required></textarea></div>
      <div><input type="submit" value="Apply Key" /></div>
    </form>
  </div>
  <div>
    <form method="post" action="/key" enctype="multipart/form-data">
      <input type="hidden" name="upload" value="1" />
      <div><label for="keyFile" />Or, Use Browse to Select a Key File</label></div>
      <div>
        <input type="file" id="keyFile" name="keyFile" required />
        <input type="submit" value="Upload Key" />
      </div>
    </form>
  </div>
  <% if (typeof error != "undefined") { %>
    <div><span><%= error %></span></div>
  <% } else { %>
    <table>
      <thead>
        <tr>
          <th>Module</th>
          <th>License Status</th>
          <th>Usage Limit</th>
        </tr>
      </thead>
      <tbody>
        <% for (var i = 0; i < modules.length; i++) { %>
          <tr>
            <td><%= modules[i].name %></td>
            <td><%= modules[i].term %></td>
            <td><%= modules[i].limit %></td>
          </tr>
        <% } %>
      </tbody>
    </table>
    <% if (hasTrials) { %>
      <div><label>Trials expire:</label><span><%= expiration %></span></div>
    <% } %>    
  <% } %>
  <% if (typeof encoded != "undefined") { %>
    <div><label>Key:</label><span><%= encoded %></span></div> 
  <% } %>
</body>

</html>